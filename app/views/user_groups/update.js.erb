function closeModals() {
  depositModal = document.getElementById('groupDeposit');
  depositModal.classList.remove('show');
  depositModal.setAttribute('style', 'display:none;');
  depositModal.setAttribute('aria-hidden', 'true;');
  withdrawModal = document.getElementById('groupWithdraw');
  withdrawModal.classList.remove('show');
  withdrawModal.setAttribute('style', 'display:none;');
  withdrawModal.setAttribute('aria-hidden', 'true;');
  document.querySelector('.modal-backdrop').classList.remove('modal-backdrop');
  document.querySelector('.modal-open').classList.remove('modal-open');
}

function refreshForm() {
  document.getElementById('user_group_deposit').value = '';
  document.getElementById('user_group_withdrawal').value = '';
}

function updateGroupTotalShares(shares) {
  const str = shares.split('');
  const groupTotalShares = document.getElementById('group-total-shares');
  groupTotalShares.innerHTML = '';
  (function animate() {
  str.length > 0 ? groupTotalShares.innerHTML += str.shift() : clearTimeout(running);
  var running = setTimeout(animate, 90);
  })();
}

function updateGroupShareValue(value) {
  const str = value.split('');
  const groupShareValue = document.getElementById('group-share-value');
  groupShareValue.innerHTML = '';
  (function animate() {
  str.length > 0 ? groupShareValue.innerHTML += str.shift() : clearTimeout(running);
  var running = setTimeout(animate, 90);
  })();
}

function updateUserShareValue(value) {
  const str = value.split('');
  const userShareValue = document.getElementById('user-total-shares');
  userShareValue.innerHTML = '';
  (function animate() {
  str.length > 0 ? userShareValue.innerHTML += str.shift() : clearTimeout(running);
  var running = setTimeout(animate, 90);
  })();
}


function port1(string1) {
  const str1 = string1.split('');
  const port1 = document.getElementById('group_portfolio1');
  port1.innerHTML = '';
  (function animate() {
  str1.length > 0 ? port1.innerHTML += str1.shift() : clearTimeout(running);
  var running = setTimeout(animate, 90);
  })();
}

function port2(string2) {
  const str2 = string2.split('');
  const port2 = document.getElementById('group_portfolio2');
  port2.innerHTML = '';
  (function animate() {
  str2.length > 0 ? port2.innerHTML += str2.shift() : clearTimeout(running);
  var running = setTimeout(animate, 90);
  })();
}

function port3(string3) {
  const str3 = string3.split('');
  const port3 = document.getElementById('group_cash_value');
  port3.innerHTML = '';
  (function animate() {
  str3.length > 0 ? port3.innerHTML += str3.shift() : clearTimeout(running);
  var running = setTimeout(animate, 90);
  })();
}

function port4(string4) {
  const str4 = string4.split('');
  const port4 = document.getElementById('user-available-balance');
  port4.innerHTML = '';
  (function animate() {
  str4.length > 0 ? port4.innerHTML += str4.shift() : clearTimeout(running);
  var running = setTimeout(animate, 90);
  })();
  const formBalance = document.getElementById('withdraw-form-balance');
  formBalance.innerHTML = string4;
}


updateGroupTotalShares('<%= j Group.find(@user_group.group_id).total_shares.to_s %>');
updateGroupShareValue('<%= j number_to_currency(Group.find(@user_group.group_id).portfolio_value / Group.find(@user_group.group_id).total_shares) %>')

port1('<%= j number_to_currency(Group.find(@user_group.group_id).portfolio_value_cents * 0.01) %>');
port2('<%= j number_to_currency(Group.find(@user_group.group_id).portfolio_value_cents * 0.01) %>');
port3('<%= j number_to_currency(Group.find(@user_group.group_id).cash_value_cents * 0.01) %>');
port4('<%= j number_to_currency(User.find(@user_group.user_id).available_balance_cents * 0.01) %>');
closeModals();
refreshForm();
